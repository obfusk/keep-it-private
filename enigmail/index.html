<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type"
      content="text/html; charset=utf-8" />
    <title>Email Privacy - Cryptoparty</title>
    <style type="text/css">
      body          { font-family: sans-serif; font-size: 19px; }
      img           { max-width: 100%; }
      .medium       { font-size: 0.8em; }
      .medium-small { font-size: 0.7em; }
      .small        { font-size: 0.6em; }
      .remark-slide { table-layout: fixed; }
    </style>
  </head>
  <body>
    <textarea id="source">

name: default
class: middle, center
layout: true

---
# Email Privacy - Cryptoparty

## Party Like It’s 1984 !

* Felix C. Stegerman `<flx@obfusk.net>`
* Donné Brok `<tonijn@dds.nl>`
* Maurice Verheesen `<mho@fsfe.org>`

> “CryptoParty is a decentralized, 
> global initiative to introduce basic
> cryptography tools to the general public.”

.small[2013-12-10]

---
name: welc
# Welcome and introduction

* What are we going to learn this evening
* Who we are 
* why we are doing this

---
layout: false

# Table of Contents

* [Welcome and introduction](#welc)
* [Why should I care about encryption? and What is public key
cryptography?](#crypto)
* [How does email work?](#work)
* * [Types of email](#types)
* * [Connection types](#connect)
* [Crypto setup](setup)
* * [Prerequisites](#prereq)
* * [What's Enigmail/Thunderbird/OpenPGP/GnuPG?](#what)
* * [Gmail Settings](#gmail)
* * [Setup Thunderbird w/ Gmail](#tb-setup)
* * [Install Enigmail](#enigmail-install)
* * [Configure Enigmail](#enigmail-config)
* * [Write Mail](#write-mail)
* * [Read Mail](#read-mail)
* * [Mail Source](#mail-source)
* * [Attachments](#attach)
* * [Signatures](#sigs)
* * [Key Management](#key-mgmt)
* * [Export Key](#export-key)
* * [Import Key](#import-key)
* * [Receive Key](#recv-key)
* * [Refresh Key](#refresh-key)
* * [Sign Key](#sign-key)
* * [Miscellaneous](#misc)
* * [Rules](#rules)
* * [Generate Key Manually](#gen-key)
* [Links](#links)

---

name: crypto

# Why should I care about encryption?

--> [Encryption - Why use (email) encryption?](../encryption/index.html#why)

# What is public key cryptography?

--> [Encryption - Public key
cryptography](../encryption/index.html#pubkey)

---
name: work
layout: false

# How does email work?
## * Types of email
## * Connection types
## * Anatomy of an email message
## * Putting it all together: email transmission and reception

---
name: types 
layout: false

# Types of email

> It's about location of the mail and access

* Webmail (think Gmail, gmx, Hotmail etc)

> Your mail provider has a mail server and on that mail server you
> access your mail through a webinterface

* Client - server based
* * IMAP
* * POP3

> Here your mail is stored on a server, but you access your mail
> through a local client (e.g. Outlook, Thunderbird, etc)

> We will only focus on the latter type, since there are some
> technical challenges with encryption for the first type.

---
name: connect
layout: false

# Connection types

* Encrypted (SSL, HTTPS)
* Unencrypted (HTTP)
> Demo ??? Show through wireshark what unencrypted looks like?

---
name: anatomy

# Anatomy of an email message

<!-- {{{1 -->

.medium[
```
Return-Path: <obfusktest@gmail.com>
Received: ...
Message-ID: <...@gmail.com>
Date: Sun, 08 Dec 2013 22:53:28 +0100
From: Test User <obfusktest@gmail.com>
User-Agent: ... Thunderbird/24.1.1
MIME-Version: 1.0
To: obfusktest@gmail.com
Subject: test #3 - unsigned + unencrypted
X-Enigmail-Version: 1.6
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

a normal message
```
]

<!-- }}}1 -->

---
name: together
# Putting it all together: 
## email transmission and reception

https://scs.senecac.on.ca/~john.selmys/subjects/ops335-101/howemailworks.png

---
name: setup

# Crypto setup

> In this part we will show how to setup your email client to work
> with you email provider and use them to sent & receive encrypted
> mails.

> First we will show how to setup your email provider. Than we will
> configure the email client. And finally we will setup up the client
> with a plugin that will take care of the encryption. At that point
> we are ready to create encryption keys that we can use with the
> plugin.

---

name: prereq
layout: false

# Prerequisites

* Email Account (e.g. Gmail*)
* Thunderbird
* GnuPG

## Linux

You'll need thunderbird and gnupg -- see the [links](#links).  Most
distributions' repositories provide both; Ubuntu:

.medium[
```
apt-get install thunderbird gnupg
```
]

## OS X**

You'll need thunderbird and gpgtools -- see the [links](#links).

## Windows**

You'll need thunderbird and gpg4win -- see the [links](#links).

.small[
  \* although a more privacy-respecting provider (e.g. MyKolab) is
  preferable

  \** although a more privacy-respecting OS is preferable
]

---

template: default
layout: true

---
name: what

# What's Enigmail?

> Enigmail is a security extension to Mozilla Thunderbird (and
Seamonkey) that enables you to write and receive email messages signed
and/or encrypted with the OpenPGP standard (using GnuPG).

# What's Thunderbird?

> Mozilla Thunderbird is a free software cross-platform email, news,
and chat client developed by the Mozilla Foundation.

# What are OpenPGP and GnuPG?

> OpenPGP is a standard protocol for encrypting email using public key
cryptography.  It is based on PGP as originally developed by Phil
Zimmermann.

> GnuPG is a free software implementation of the OpenPGP standard.

---
name: gmail

# Gmail Settings

---

![images/gmail_imap.png](images/gmail_imap.png)

.small[Activate IMAP for Gmail]

---

name: tb-setup

# Setup Thunderbird w/ Gmail

---

![images/tb_welcome.png](images/tb_welcome.png)

.small[Welcome to Thunderbird]

---

![images/tb_setup_account.png](images/tb_setup_account.png)

.small[Thunderbird Account Setup - Step #1]

---

![images/tb_setup_gmail.png](images/tb_setup_gmail.png)

.small[Thunderbird Account Setup - Step #2]

---

![images/tb_main.png](images/tb_main.png)

.small[Thunderbird Main Window]

---

name: enigmail-install

# Install Enigmail

---

![images/tb_addons.png](images/tb_addons.png)

.small[Install Enigmail with Thunderbird Add-ons Manager]

---

![images/tb_restart_now.png](images/tb_restart_now.png)

.small[Restart Thunderbird after Enigmail Install]

---

name: enigmail-config

# Configure Enigmail

---

![images/wizard_step_1.png](images/wizard_step_1.png)

.small[Enigmail Wizard - Step #1]

---

![images/wizard_step_2.png](images/wizard_step_2.png)

.small[Enigmail Wizard - Step #2]

---

![images/wizard_step_3.png](images/wizard_step_3.png)

.small[Enigmail Wizard - Step #3]

---

![images/wizard_step_4.png](images/wizard_step_4.png)

.small[Enigmail Wizard - Step #4]

---

![images/wizard_step_5.png](images/wizard_step_5.png)

.small[Enigmail Wizard - Step #5]

---

![images/wizard_step_6.png](images/wizard_step_6.png)

.small[Enigmail Wizard - Step #6]

---

![images/wizard_step_7.png](images/wizard_step_7.png)

.small[Enigmail Wizard - Step #7]

---

![images/wizard_step_8.png](images/wizard_step_8.png)

.small[Enigmail Wizard - Step #8]

---

![images/wizard_q_revoke.png](images/wizard_q_revoke.png)

.small[Enigmail Wizard - Generate Revocation Certificate?]

Keep it safe! And be careful with file and directory permissions!

---

![images/enter_pass.png](images/enter_pass.png)

.small[Enter Passphrase]

YMMV.

---

![images/wizard_save_revoke.png](images/wizard_save_revoke.png)

.small[Enigmail Wizard - Save Revocation Certificate]

---

![images/wizard_revoke_saved.png](images/wizard_revoke_saved.png)

.small[Enigmail Wizard - Revocation Certificate Saved]

---

![images/wizard_done.png](images/wizard_done.png)

.small[Enigmail Wizard - Done]

---

name: write-mail

# Write Mail

---

![images/tb_write.png](images/tb_write.png)

.small[Thunderbird Write]

---

![images/tb_write_1.png](images/tb_write_1.png)

.small[Thunderbird Write - Signed]

---

![images/tb_write_2.png](images/tb_write_2.png)

.small[Thunderbird Write - Signed & Encrypted]

---

![images/tb_write_3.png](images/tb_write_3.png)

.small[Thunderbird Write - Unsigned & Unencrypted (Normal)]

---

name: read-mail

# Read Mail

---

![images/tb_mail_1.png](images/tb_mail_1.png)

.small[Thunderbird Read - Signed]

---

![images/tb_mail_2.png](images/tb_mail_2.png)

.small[Thunderbird Read - Signed & Encrypted]

---

![images/tb_mail_3.png](images/tb_mail_3.png)

.small[Thunderbird Read - Unsigned & Unencrypted (Normal)]

---

name: mail-source

# Mail Source

---

layout: false

Signed Mail Source:

<!-- {{{1 -->

.medium[
```
Return-Path: <obfusktest@gmail.com>
Received: ...
Message-ID: <...@gmail.com>
Date: Sun, 08 Dec 2013 22:51:25 +0100
From: Test User <obfusktest@gmail.com>
User-Agent: ... Thunderbird/24.1.1
MIME-Version: 1.0
To: obfusktest@gmail.com
Subject: test #1 - sign
X-Enigmail-Version: 1.6
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

a signed message
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)
Comment: Using GnuPG with Thunderbird - http://www.enigmail.net/

iQEcBAEBAgAGBQJSpOndAAoJEDwvV/C2euNIg8AH/0yOJIyu1721Q0+9FQF1p/Dq
4Zs4/g8M16zTdVSb7AUvJFimhWEaFRKiVtEc2kr3EOIV96hO4hzTBRB4Y/APNyJr
YtmCxE7mKJ+3ZDpwmB5KRabCOSDmTFQyGTyW/OZr51GN/Zd7lDdlSrK95QN9rxzY
yo0oImQDLCeyciEZi9431TTdGQi6+9t+uzlo6xaxTCiB5TdbMKDg4mCkZu+obtwQ
J8Q1reuSegAczcNiu21k96hYdcxcxpDa8veMCg8HdYo/+QmyRBKijLoDsyhojZX8
65lBqvMEGveuqUTTIeU/0ZQvg8TcwjftEHF3wpAfOzfVwPpDpCoa4AGUwB5MvkE=
=1Fp1
-----END PGP SIGNATURE-----
```
]

<!-- }}}1 -->

---

Signed & Encrypted Mail Source:

<!-- {{{1 -->

.medium-small[
```
Return-Path: <obfusktest@gmail.com>
Received: ...
Message-ID: <...@gmail.com>
Date: Sun, 08 Dec 2013 22:52:02 +0100
From: Test User <obfusktest@gmail.com>
User-Agent: ... Thunderbird/24.1.1
MIME-Version: 1.0
To: obfusktest@gmail.com
Subject: test #2 - sign + encrypt
X-Enigmail-Version: 1.6
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit

-----BEGIN PGP MESSAGE-----
Charset: ISO-8859-1
Version: GnuPG v1.4.11 (GNU/Linux)
Comment: Using GnuPG with Thunderbird - http://www.enigmail.net/

hQEMA7cQS3ayLdgbAQgAkcbyScDEdrb2f2CB/HNlEESFAzQ9vC0xBxo2Zg1P5YoO
hlaUNbMj6zc3H+yM+XjlOJuxAKWAevICOTbWvBSjD7pI267D3BGcpPwSpCvppK3o
z/aR6onAzOqesjK/IJ3y7yHWN4sFvwghjeENU/KOMxsOmnapJokvzpN8KBoxK4/C
a/4vVJ/2z1EgFEj9pgtaQ3PHb7pY+Kz19BbXfFlS4I7BwQAic8X9SnS9cQTexiU7
jzQUyTZTERuLoyVDd1QnM1GZdgkzugqTz9tlItr9P+7MRNH92fxdLYYXztt1eQYV
eun1vyp18TbaWiGawNfDN3Qq/Z72zd48AWkyh5Edh9LAzAHSBUeTRYqHxxs/t2zt
zgjNI8zztrxLLLxUDIuq2Zgcljja3yjo61GkdAFDzFX57uakV95xAUkrA7qwkwr3
610caXyQDvoksy49tgutJHMcr3iyl4oYadFwIflvNt+N70gFxYplx1IO+Tiw32b8
gpwoZVtEyUYr5Z71DGPrz9D6UzGUT6jvLtjnc53UTT5R7T7OZO1rtLzIpZ/Kzwsq
CR0z57/kfkRme0wWWw2V4BzE+Fk4lNwoZbT71hsRKWwO3/Ljeb5GpwFF67LSiZme
zXi4JKpf/NDHwNf60KmKZubKwcdIsK2X+I2CKNTVwb34xbV+kaLDc5bPrq8aKchV
ToWiCatR6tVh8g3+OtVqkuGp52OZB3zoRorsAm64/P33HTNuELpTjq+0/HneBtaZ
YMxeNDZ7Va9zXXRmrXNj5reudSFrCxRK9n5FM0OaFmWgTertxf6jwx40eZWIzaDc
cgJiIKdFUDWxnRPMyjCQ6UDfml7rzWp1NgD75gRyZG4hSfhDKpBnBFrZvXTd5A==
=oZHe
-----END PGP MESSAGE-----
```
]

<!-- }}}1 -->

---

Unsigned & Unencrypted (Normal) Mail Source:

<!-- {{{1 -->

.medium[
```
Return-Path: <obfusktest@gmail.com>
Received: ...
Message-ID: <...@gmail.com>
Date: Sun, 08 Dec 2013 22:53:28 +0100
From: Test User <obfusktest@gmail.com>
User-Agent: ... Thunderbird/24.1.1
MIME-Version: 1.0
To: obfusktest@gmail.com
Subject: test #3 - unsigned + unencrypted
X-Enigmail-Version: 1.6
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

a normal message
```
]

<!-- }}}1 -->

---

template: default
layout: true

---

name: attach

# Attachments

---

![images/enigmail_attachments.png](images/enigmail_attachments.png)

.small[Sending Encrypted Attachements]

---

name: sigs

# Signatures

---

![images/tb_mail_4_unknown.png](images/tb_mail_4_unknown.png)

.small[Unverified Signature]

---

![images/tb_mail_4_untrusted.png](images/tb_mail_4_untrusted.png)

.small[Untrusted Signature]

---

![images/tb_mail_4_signed_key.png](images/tb_mail_4_signed_key.png)

.small[Good Signature]

---

name: key-mgmt

# Key Management

---

![images/enigmail_key_management.png](images/enigmail_key_management.png)

.small[Enigmail Key Management]

---

![images/enigmail_key_management_all.png](images/enigmail_key_management_all.png)

.small[Enigmail Key Management - Show All]

---

![images/enigmail_key_props.png](images/enigmail_key_props.png)

.small[Enigmail Key Management - Key Properties]

---

![images/enigmail_key_actions.png](images/enigmail_key_actions.png)

.small[Enigmail Key Management - Key Actions]

---

![images/enigmail_key_management_menu.png](images/enigmail_key_management_menu.png)

.small[Enigmail Key Management - Key Menu]

---

name: export-key

# Export Key

---

![images/enigmail_key_management_export.png](images/enigmail_key_management_export.png)

.small[Enigmail Key Management - Export]

---

![images/enigmail_key_management_export_save.png](images/enigmail_key_management_export_save.png)

.small[Enigmail Key Management - Export - Save]

---

![images/tb_write_send_key.png](images/tb_write_send_key.png)

.small[Enigmail Key Management - Export & Send]

---

name: import-key

# Import Key

---

![images/enigmail_key_management_import_step_1.png](images/enigmail_key_management_import_step_1.png)

.small[Enigmail Key Management - Import - Step #1]

---

![images/enigmail_key_management_import_step_2.png](images/enigmail_key_management_import_step_2.png)

.small[Enigmail Key Management - Import - Step #2]

---

name: recv-key

# Receive Key

---

![images/enigmail_recv_key_step_1.png](images/enigmail_recv_key_step_1.png)

.small[Enigmail Key Management - Receive Key - Step #1]

---

![images/enigmail_recv_key_step_2.png](images/enigmail_recv_key_step_2.png)

.small[Enigmail Key Management - Receive Key - Step #2]

---

![images/enigmail_recv_key_step_3.png](images/enigmail_recv_key_step_3.png)

.small[Enigmail Key Management - Receive Key - Step #3]

---

![images/enigmail_key_management_w_obfusk.png](images/enigmail_key_management_w_obfusk.png)

.small[Enigmail Key Management - With Received Key]

---

name: refresh-key

# Refresh Key

---

![images/enigmail_key_management_refreshed.png](images/enigmail_key_management_refreshed.png)

.small[Enigmail Key Management - Refresh Key]

---

name: sign-key

# Sign Key

---

![images/enigmail_key_management_sign.png](images/enigmail_key_management_sign.png)

.small[Enigmail Key Management - Choose to Sign Key]

---

![images/enigmail_sign_sender_key.png](images/enigmail_sign_sender_key.png)

.small[Thunderbird Read - Choose to Sign Sender's Key]

---

![images/enigmail_sign_key_local.png](images/enigmail_sign_key_local.png)

.small[Enigmail Key Management - Sign Key (Locally)]

Make sure to check the fingerprint!

---

![images/enigmail_sigs.png](images/enigmail_sigs.png)

.small[Enigmail Key Management - Signatures]

---

name: misc

# Miscellaneous

---

![images/enigmail_unknown_recipient.png](images/enigmail_unknown_recipient.png)

.small[Enigmail - Encrypt to Unknown Recipient]

---

![images/enigmail_prefs_expert.png](images/enigmail_prefs_expert.png)

.small[Enigmail Preferences - Expert]

---

![images/enigmail_prefs_alwaystrust.png](images/enigmail_prefs_alwaystrust.png)

.small[Enigmail Preferences - Always Trust?]

This allows you to encrypt messages to untrusted keys (i.e. keys that
are not in your web of trust).

---

name: rules

# Rules

---

![images/enigmail_prefs_key_sel.png](images/enigmail_prefs_key_sel.png)

.small[Enigmail Preferences - Key Selection]

---

![images/enigmail_prefs_rules.png](images/enigmail_prefs_rules.png)

.small[Enigmail Preferences - Rules]

---

![images/enigmail_prefs_add_rule.png](images/enigmail_prefs_add_rule.png)

.small[Enigmail Preferences - Add Rule]

---

name: gen-key

# Generate Key Manually

---

![images/enigmail_gen_tab_1.png](images/enigmail_gen_tab_1.png)

.small[Enigmail Generate Key - Tab #1]

---

![images/enigmail_gen_tab_2.png](images/enigmail_gen_tab_2.png)

.small[Enigmail Generate Key - Tab #2]

---

![images/enigmail_use_existing_key.png](images/enigmail_use_existing_key.png)

.small[Enigmail Wizard - Use Existing Key]

---

name: links
layout: false

# Links

* https://github.com/obfusk/keep-it-private
* http://obfusk.github.io/keep-it-private

<!-- -->

* https://www.enigmail.net
* http://www.mozilla.org/thunderbird

<!-- -->

* http://www.gnupg.org
* https://gpgtools.org (OS X)
* http://www.gpg4win.org (Windows)

    </textarea>
    <script src="../remark-0.5.9.min.js" type="text/javascript">
    </script>
    <script type="text/javascript">
      var slideshow = remark.create();
    </script>
  </body>
</html>
<!-- vim: set tw=70 sw=2 sts=2 et ft=mkd : -->
